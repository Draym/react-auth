(this["webpackJsonpreact-auth"]=this["webpackJsonpreact-auth"]||[]).push([[5],{106:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a,r=n(9),s=n(8),i=n(13);!function(e){e[e.UNAUTHORIZED=0]="UNAUTHORIZED",e[e.SERVER_ERROR=1]="SERVER_ERROR",e[e.OTHER=2]="OTHER"}(a||(a={}));var o=function(){function e(){Object(s.a)(this,e)}return Object(r.a)(e,null,[{key:"stringifyParameters",value:function(e){if(null==e)return"";var t="";for(var n in e)""!==t&&(t+="&"),t+="".concat(n,"=").concat(e[n]);return t=""===t?t:"?"+t}},{key:"createUrl",value:function(e,t,n){return null!=e&&"/"!==e.slice(-1)&&(e+="/"),(e||"")+t+(n||"")}},{key:"handleHttpResult",value:function(e,t,n){console.log("[HTTP]",e),(e.redirected||302===e.status)&&console.log("[HTTP] redirection"),401===e.status?(console.log("[HTTP] need login"),n({error:"Unauthorized access.",type:a.UNAUTHORIZED})):e.text().then((function(r){if(200===e.status){var s=JSON.parse(r);t(s.data)}else{var i=JSON.parse(r);n({error:i.data.error,type:a.SERVER_ERROR})}}))}},{key:"httpURL",value:function(e,t,n,r,s,o,u){var c=this;if(i.a.hasSession()){var l=i.a.getSessionToken();l&&(r.Authorization=l)}var h=this.stringifyParameters(s),f=this.createUrl(t,n,h);console.log("[API_"+e+"]: "+f),fetch(f,{method:e,headers:r}).then((function(e){c.handleHttpResult(e,o,u)})).catch((function(e){console.log("[API][ERROR]--\x3e",e),u({error:JSON.stringify(e.error),type:a.OTHER})}))}},{key:"httpData",value:function(e,t,n,r,s,o,u){var c=this;if(i.a.hasSession()){var l=i.a.getSessionToken();l&&(r.Authorization=l)}var h=this.createUrl(t,n,null);console.log("[API_"+e+"]: "+h),fetch(h,{method:e,headers:r,body:s}).then((function(e){c.handleHttpResult(e,o,u)})).catch((function(e){console.log("[API][ERROR]--\x3e",e),u({error:e.error,type:a.OTHER})}))}},{key:"get",value:function(e,t,n,a,r){var s={"Access-Control-Allow-Origin":"*"};this.httpURL("GET",e,t,s,n,a,r)}},{key:"post",value:function(e,t,n,a,r){var s={"Content-Type":"application/json",Accept:"application/json"};this.httpData("POST",e,t,s,JSON.stringify(n),a,r)}},{key:"put",value:function(e,t,n,a,r){var s={"Content-Type":"application/json",Accept:"application/json"};this.httpData("PUT",e,t,s,JSON.stringify(n),a,r)}},{key:"delete",value:function(e,t,n,a,r){var s={"Content-Type":"application/json",Accept:"application/json"};this.httpData("DELETE",e,t,s,JSON.stringify(n),a,r)}}]),e}(),u="api/auth/login",c="api/auth/quick-login/eth",l="api/auth/quick-login/eth/get-nonce",h="api/auth/signup",f="api/auth/signup/eth-linked",d="api/user/get",p=Object({NODE_ENV:"production",PUBLIC_URL:"/react-auth",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_ENDPOINT||null,m=Object(r.a)((function e(){Object(s.a)(this,e)}));m.auth={login:function(e){return new Promise((function(t,n){o.post(p,u,e,t,n)}))},quickLogin:{ethLogin:function(e){return new Promise((function(t,n){o.post(p,c,e,t,n)}))},ethGetNonce:function(e){return new Promise((function(t,n){o.get(p,l,e,t,n)}))}},signup:function(e){return new Promise((function(t,n){o.post(p,h,e,t,n)}))},signupWithEth:function(e){return new Promise((function(t,n){o.post(p,f,e,t,n)}))}},m.user={get:function(){return new Promise((function(e,t){o.get(p,d,null,e,t)}))}}},123:function(e,t,n){},155:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n(83),r=n(8),s=n(9),i=n(23),o=n(20),u=n(21),c=n(63),l=n.n(c),h=n(0),f=n(122),d=n(572),p="data:image/png;base64,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",m=(n(123),n(96)),b=n(3),g=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).onClick=a.onClick.bind(Object(i.a)(a)),a}return Object(s.a)(n,[{key:"onClick",value:function(){var e=Object(a.a)(l.a.mark((function e(t){var n=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.a.loadMetamask().then((function(e){n.props.callback()}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(b.jsxs)(f.a,{className:"metamask-btn",onClick:this.onClick,children:[Object(b.jsx)(d.a,{className:"metamask-icon",src:p}),Object(b.jsx)("span",{className:"metamask-btn-text",children:this.props.text})]})}}]),n}(h.Component)},162:function(e,t){},164:function(e,t){},165:function(e,t){},171:function(e,t){},182:function(e,t){},183:function(e,t){},191:function(e,t){},192:function(e,t){},201:function(e,t){},202:function(e,t){},243:function(e,t){},244:function(e,t){},249:function(e,t){},251:function(e,t){},565:function(e,t,n){},573:function(e,t,n){"use strict";n.r(t);var a=n(83),r=n(8),s=n(9),i=n(23),o=n(20),u=n(21),c=n(63),l=n.n(c),h=n(0),f=n(1),d=n(561),p=n(575),m=n(122),b=(n(565),n(106)),g=n(13),w=n(155),k=n(96),j=n(3),O=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).handleSubmitLoginWithMetamask=Object(a.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=k.a.getDefaultAccount())){e.next=4;break}return s.setState({error:"Select an account on your Metamask."}),e.abrupt("return");case 4:s.signupWithMetamask(s.state.email,s.state.username,s.state.password,t);case 5:case"end":return e.stop()}}),e)}))),s.goToMain=function(e){e.preventDefault(),s.props.history.push("/")},s.state={submitBusy:!1,email:"",username:"",password:"",error:null},s.signup=s.signup.bind(Object(i.a)(s)),s.goToLogin=s.goToLogin.bind(Object(i.a)(s)),s.goToMain=s.goToMain.bind(Object(i.a)(s)),s.handleSubmitLogin=s.handleSubmitLogin.bind(Object(i.a)(s)),s.handleSubmitLoginWithMetamask=s.handleSubmitLoginWithMetamask.bind(Object(i.a)(s)),s.handleEmailChange=s.handleEmailChange.bind(Object(i.a)(s)),s.handleUsernameChange=s.handleUsernameChange.bind(Object(i.a)(s)),s.handlePasswordChange=s.handlePasswordChange.bind(Object(i.a)(s)),s}return Object(s.a)(n,[{key:"signup",value:function(e,t,a){var r=this;n.inputsAreValid(e,t,a)?(this.setState({submitBusy:!0,error:null}),b.a.auth.signup({email:e,username:t,password:a}).then((function(t){b.a.auth.login({email:e,password:a}).then((function(e){r.setState({submitBusy:!1}),g.a.storeSession(e.token),r.props.history.push("/home")}),(function(e){r.setState({submitBusy:!1,error:e.error})}))}),(function(e){r.setState({submitBusy:!1,error:e.error})}))):this.setState({error:"Please correct invalid fields."})}},{key:"signupWithMetamask",value:function(e,t,a,r){var s=this;n.inputsAreValid(e,t,a)?(this.setState({submitBusy:!0,error:null}),b.a.auth.signupWithEth({email:e,username:t,password:a,publicAddress:r}).then((function(t){b.a.auth.login({email:e,password:a}).then((function(e){s.setState({submitBusy:!1}),g.a.storeSession(e.token),s.props.history.push("/home")}),(function(e){s.setState({submitBusy:!1,error:e.error})}))}),(function(e){s.setState({submitBusy:!1,error:e.error})}))):this.setState({error:"Please correct invalid fields."})}},{key:"handleSubmitLogin",value:function(e){e.preventDefault(),this.signup(this.state.email,this.state.username,this.state.password)}},{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"handleUsernameChange",value:function(e){this.setState({username:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"goToLogin",value:function(e){e.preventDefault(),this.props.history.push("/login")}},{key:"render",value:function(){return Object(j.jsx)("div",{className:"content signup",children:Object(j.jsxs)("div",{className:"wrapper",children:[Object(j.jsx)("div",{className:"exit-btn",children:Object(j.jsx)(d.a,{onClick:this.goToMain})}),Object(j.jsxs)("form",{onSubmit:this.handleSubmitLogin,children:[Object(j.jsx)("h3",{children:"Register"}),null!=this.state.error&&Object(j.jsx)(p.a,{variant:"danger",children:this.state.error}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{children:"Email address"}),Object(j.jsx)("input",{type:"email",value:this.state.email,onChange:this.handleEmailChange,className:"form-control",placeholder:"Enter email"})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{children:"Username"}),Object(j.jsx)("input",{type:"text",value:this.state.username,onChange:this.handleUsernameChange,className:"form-control",placeholder:"Enter username"})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{children:"Password"}),Object(j.jsx)("input",{type:"password",value:this.state.password,onChange:this.handlePasswordChange,className:"form-control",placeholder:"Enter password"})]}),Object(j.jsxs)(m.a,{type:"submit",className:"btn btn-primary btn-block",disabled:this.state.submitBusy,children:[this.state.submitBusy&&Object(j.jsx)("i",{className:"fa fa-refresh fa-spin",style:{marginRight:"5px"}}),this.state.submitBusy&&Object(j.jsx)("span",{children:"Logging-in.."}),!this.state.submitBusy&&Object(j.jsx)("span",{children:"Submit"})]}),Object(j.jsxs)("p",{className:"is-registered text-right",children:["Already registered ",Object(j.jsx)("a",{href:"/#",onClick:this.goToLogin,children:"sign in?"})]})]}),Object(j.jsxs)("div",{className:"form-metamask",children:[Object(j.jsx)("div",{children:Object(j.jsx)("p",{className:"separator"})}),Object(j.jsx)(w.a,{text:"Register with Metamask",callback:this.handleSubmitLoginWithMetamask})]})]})})}}],[{key:"inputsAreValid",value:function(e,t,n){return""!==e&&""!==t&&""!==n}}]),n}(h.Component);t.default=Object(f.g)(O)},96:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(83),r=n(8),s=n(9),i=n(63),o=n.n(i),u=n(157),c=n.n(u),l=n(266),h=n.n(l),f=function(){function e(){Object(r.a)(this,e)}return Object(s.a)(e,null,[{key:"loadMetamask",value:function(){var e=Object(a.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=10;break}return e.next=3,window.ethereum.request({method:"eth_requestAccounts"});case 3:return t=e.sent,window.web3=new c.a(window.ethereum),window.ethereum.defaultAccount=t[0],window.ethereum.on("accountsChanged",(function(e){window.ethereum.defaultAccount=e[0]})),e.abrupt("return",!0);case 10:return window.alert("Non-Ethereum browser detected. You should consider trying MetaMask!"),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"isMetamaskInstalled",value:function(){var e=Object(a.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h()();case 2:return t=e.sent,e.abrupt("return",!!t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"isMetamaskConnected",value:function(){var e=Object(a.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h()();case 2:if(!e.sent){e.next=11;break}return console.log("Metamask successfully detected!"),e.next=7,window.ethereum.request({method:"eth_accounts"});case 7:return t=e.sent,e.abrupt("return",t.length>0);case 11:return console.log("Metamask is not installed!"),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(){var e=Object(a.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="Signing with Metamask: ".concat(n),e.abrupt("return",window.web3.eth.personal.sign(window.web3.utils.fromUtf8(a),t,""));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getEth",value:function(){return window.ethereum}},{key:"getNetwork",value:function(){var e=Object(a.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.web3.eth.net.getId());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getAccounts",value:function(){var e=Object(a.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.ethereum.request({method:"eth_accounts"}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getDefaultAccount",value:function(){try{return window.ethereum.defaultAccount.toLowerCase()}catch(e){return null}}},{key:"address",value:function(e){return e.toLowerCase()}},{key:"isDefaultAccount",value:function(e){return this.getDefaultAccount()===e.toLowerCase()}},{key:"encode",value:function(e){return window.web3.utils.fromAscii(e)}},{key:"nullAddress",value:function(){return"0x0000000000000000000000000000000000000000"}},{key:"nullBytes",value:function(){return"0x0000000000000000000000000000000000000000000000000000000000000000"}}]),e}()}}]);
//# sourceMappingURL=5.33440496.chunk.js.map