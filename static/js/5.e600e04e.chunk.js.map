{"version":3,"sources":["utils/http/HttpUtils.ts","api/ApiEndpoint.ts","api/ApiSDK.ts","resources/images.ts","resources/icons/metamask.png","web/auth/components/MetamaskButton.tsx","web/auth/views/signup/SignUpView.tsx","blockchain/Web3SDK.ts"],"names":["ApiError","HttpUtils","parameters","result","i","domain","endpoint","urlParameters","slice","response","onSuccess","onError","console","log","redirected","status","error","type","UNAUTHORIZED","text","then","success","JSON","parse","data","SERVER_ERROR","headers","SessionStorage","hasSession","token","getSessionToken","this","stringifyParameters","url","createUrl","fetch","method","handleHttpResult","catch","stringify","OTHER","body","httpURL","httpData","ApiEndpoint","process","ApiSDK","auth","login","request","Promise","resolve","reject","post","quickLogin","ethLogin","ethGetNonce","get","signup","signupWithEth","user","IconImg","MetamaskButton","props","onClick","bind","e","a","Web3SDK","loadMetamask","r","callback","Button","className","Image","src","Component","SignUpView","handleSubmitLoginWithMetamask","publicAddress","getDefaultAccount","setState","signupWithMetamask","state","email","username","password","goToMain","preventDefault","history","push","submitBusy","goToLogin","handleSubmitLogin","handleEmailChange","handleUsernameChange","handlePasswordChange","inputsAreValid","_","storeSession","target","value","onSubmit","variant","onChange","placeholder","disabled","style","marginRight","href","withRouter","window","ethereum","accounts","web3","Web3","defaultAccount","on","alert","detectEthereumProvider","provider","length","message","eth","personal","sign","utils","fromUtf8","net","getId","toLowerCase","address","fromAscii"],"mappings":"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","file":"static/js/5.e600e04e.chunk.js","sourcesContent":["import SessionStorage from '../storage/UserStorage'\n\nexport interface SuccessResponse<T> {\n    data: T\n}\nexport interface ErrorResponse {\n    data: { error: string }\n}\n\nexport enum ApiError {\n    UNAUTHORIZED,\n    SERVER_ERROR,\n    OTHER\n}\n\nexport interface ErrorDTO {\n    type: ApiError\n    error: string\n}\n\nexport default class HttpUtils {\n\n    private static stringifyParameters(parameters: { [key: string]: string } | null): string {\n        if (parameters == null) {\n            return ''\n        }\n        let result = ''\n        for (let i in parameters) {\n            if (result !== '')\n                result += '&'\n            result += `${i}=${parameters[i]}`\n        }\n        result = (result === '' ? result : '?' + result)\n        return result\n    }\n\n    private static createUrl(domain: string | null, endpoint: string, urlParameters: string | null): string {\n        if (domain != null && domain.slice(-1) !== '/') {\n            domain += '/'\n        }\n        return (domain || '') + endpoint + (urlParameters || '')\n    }\n\n    private static handleHttpResult<T>(\n        response: Response,\n        onSuccess: (data: T) => void,\n        onError: (error: ErrorDTO) => void) {\n        console.log('[HTTP]', response);\n        if (response.redirected || response.status === 302) {\n            console.log('[HTTP] redirection');\n        }\n        if (response.status === 401) {\n            console.log('[HTTP] need login');\n            onError({\n                error: \"Unauthorized access.\",\n                type: ApiError.UNAUTHORIZED\n            });\n        } else {\n            response.text().then(function (text) {\n                const status = response.status;\n                if (status === 200) {\n                    const success: SuccessResponse<T> = JSON.parse(text)\n                    onSuccess(success.data);\n                } else {\n                    const error: ErrorResponse = JSON.parse(text)\n                    onError({\n                        error: error.data.error,\n                        type: ApiError.SERVER_ERROR\n                    });\n                }\n            });\n        }\n    }\n\n    private static httpURL<T>(\n        type: string,\n        domain: string | null,\n        endpoint: string,\n        headers: { [key: string]: string },\n        parameters: { [key: string]: string } | null,\n        onSuccess: (data: T) => void,\n        onError: (error: ErrorDTO) => void) {\n\n        if (SessionStorage.hasSession()) {\n            let token = SessionStorage.getSessionToken()\n            if (token)\n                headers['Authorization'] = token\n        }\n        let urlParameters: string = this.stringifyParameters(parameters)\n        let url: string = this.createUrl(domain, endpoint, urlParameters)\n        console.log('[API_' + type + ']: ' + url)\n\n        fetch(url, {\n            method: type,\n            headers: headers\n        }).then(response => {\n            this.handleHttpResult(response, onSuccess, onError)\n        }).catch(error => {\n            console.log('[API][ERROR]-->', error)\n            onError({\n                error: JSON.stringify(error.error),\n                type: ApiError.OTHER\n            });\n        })\n    }\n\n    private static httpData<T>(\n        type: string,\n        domain: string | null,\n        endpoint: string,\n        headers: { [key: string]: string },\n        data: BodyInit,\n        onSuccess: (data: T) => void,\n        onError: (error: ErrorDTO) => void) {\n\n        if (SessionStorage.hasSession()) {\n            let token = SessionStorage.getSessionToken()\n            if (token)\n                headers['Authorization'] = token\n        }\n        let url: string = this.createUrl(domain, endpoint, null)\n\n        console.log('[API_' + type + ']: ' + url)\n        fetch(url, {\n            method: type,\n            headers: headers,\n            body: data\n        }).then(response => {\n            this.handleHttpResult(response, onSuccess, onError)\n        }).catch(error => {\n            console.log('[API][ERROR]-->', error)\n            onError({\n                error: error.error,\n                type: ApiError.OTHER\n            });\n        })\n    }\n\n    static get<T>(domain: string | null, endpoint: string, parameters: { [key: string]: string } | null, onSuccess: (data: T) => void, onError: (error: ErrorDTO) => void) {\n        let headers: { [key: string]: string } = {}\n        headers['Access-Control-Allow-Origin'] = '*'\n        this.httpURL('GET', domain, endpoint, headers, parameters, onSuccess, onError)\n    }\n\n    static post<T>(domain: string | null, endpoint: string, data: {}, onSuccess: (data: T) => void, onError: (error: ErrorDTO) => void) {\n        let headers: { [key: string]: string } = {}\n        headers['Content-Type'] = 'application/json'\n        headers['Accept'] = 'application/json'\n        this.httpData('POST', domain, endpoint, headers, JSON.stringify(data), onSuccess, onError)\n    }\n\n    static put<T>(domain: string | null, endpoint: string, data: {}, onSuccess: (data: T) => void, onError: (error: ErrorDTO) => void) {\n        let headers: { [key: string]: string } = {}\n        headers['Content-Type'] = 'application/json'\n        headers['Accept'] = 'application/json'\n        this.httpData('PUT', domain, endpoint, headers, JSON.stringify(data), onSuccess, onError)\n    }\n\n    static delete<T>(domain: string | null, endpoint: string, data: {}, onSuccess: (data: T) => void, onError: (error: ErrorDTO) => void) {\n        let headers: { [key: string]: string } = {}\n        headers['Content-Type'] = 'application/json'\n        headers['Accept'] = 'application/json'\n        this.httpData('DELETE', domain, endpoint, headers, JSON.stringify(data), onSuccess, onError)\n    }\n}","export const ApiEndpoint = {\n    AUTH_Login: 'api/auth/login',\n    AUTH_Login_eth: 'api/auth/quick-login/eth',\n    AUTH_Login_eth_getNonce: 'api/auth/quick-login/eth/get-nonce',\n    AUTH_Signup: 'api/auth/signup',\n    AUTH_Signup_eth: 'api/auth/signup/eth-linked',\n    USER_get: 'api/user/get',\n}","import {UserApi} from \"./user/UserApi\";\nimport {AuthApi} from \"./auth/AuthApi\";\nimport {UserDTO} from \"./user/UserDTO\";\nimport HttpUtils from \"../utils/http/HttpUtils\";\nimport {ApiEndpoint} from \"./ApiEndpoint\";\nimport {TokenDTO} from \"./auth/TokenDTO\";\nimport {LoginRequest} from \"./auth/LoginRequest\";\nimport {SignupRequest} from \"./auth/SignupRequest\";\nimport {SignupEthRequest} from \"./auth/SignupEthRequest\";\nimport {EthLoginRequest} from \"./auth/EthLoginRequest\";\nimport {GetNonceRequest} from \"./auth/GetNonceRequest\";\nimport {NonceDTO} from \"./auth/NonceDTO\";\n\nconst domain: string | null = process.env.REACT_APP_API_ENDPOINT || null;\n\nexport default class ApiSDK {\n\n    static auth: AuthApi = {\n        login: function (request: LoginRequest): Promise<TokenDTO> {\n            return new Promise<TokenDTO>(function (resolve, reject) {\n                HttpUtils.post(domain, ApiEndpoint.AUTH_Login, request, resolve, reject);\n            });\n        },\n        quickLogin: {\n            ethLogin: function (request: EthLoginRequest): Promise<TokenDTO> {\n                return new Promise<TokenDTO>(function (resolve, reject) {\n                    HttpUtils.post(domain, ApiEndpoint.AUTH_Login_eth, request, resolve, reject);\n                });\n            },\n            ethGetNonce: function (request: GetNonceRequest): Promise<NonceDTO> {\n                return new Promise<NonceDTO>(function (resolve, reject) {\n                    HttpUtils.get(domain, ApiEndpoint.AUTH_Login_eth_getNonce, request, resolve, reject);\n                });\n            }\n        },\n        signup: function (request: SignupRequest): Promise<UserDTO> {\n            return new Promise<UserDTO>(function (resolve, reject) {\n                HttpUtils.post(domain, ApiEndpoint.AUTH_Signup, request, resolve, reject);\n            });\n        },\n        signupWithEth: function (request: SignupEthRequest): Promise<UserDTO> {\n            return new Promise<UserDTO>(function (resolve, reject) {\n                HttpUtils.post(domain, ApiEndpoint.AUTH_Signup_eth, request, resolve, reject);\n            });\n        }\n    }\n\n    static user: UserApi = {\n        get: function (): Promise<UserDTO> {\n            return new Promise<UserDTO>(function (resolve, reject) {\n                HttpUtils.get(domain, ApiEndpoint.USER_get, null, resolve, reject);\n            });\n        }\n    }\n}","import metamask from './icons/metamask.png'\n\nexport const IconImg = {\n    METAMASK: metamask\n}","export default \"data:image/png;base64,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\"","import {Component} from \"react\";\nimport {Button, Image} from \"react-bootstrap\";\nimport {IconImg} from \"../../../resources/images\";\n\nimport './MetamaskButton.scss';\nimport Web3SDK from \"../../../blockchain/Web3SDK\";\n\ninterface MetamaskButtonProperties {\n    text: string,\n    callback: () => void\n}\n\ntype MetamaskButtonState = {}\n\nexport default class MetamaskButton extends Component<MetamaskButtonProperties, MetamaskButtonState> {\n    constructor(props: MetamaskButtonProperties) {\n        super(props)\n        this.onClick = this.onClick.bind(this)\n    }\n\n    async onClick(e: any) {\n        Web3SDK.loadMetamask().then(r => {\n            this.props.callback()\n        })\n    }\n\n    render() {\n        return <Button className=\"metamask-btn\" onClick={this.onClick}><Image className=\"metamask-icon\"\n                                                                              src={IconImg.METAMASK}/>\n            <span className=\"metamask-btn-text\">{this.props.text}</span>\n        </Button>\n    }\n}","import {Component} from \"react\";\nimport {RouteComponentProps, withRouter} from \"react-router-dom\";\nimport {Alert, Button, CloseButton} from \"react-bootstrap\";\nimport './SignupView.scss';\nimport ApiSDK from \"../../../../api/ApiSDK\";\nimport SessionStorage from \"../../../../utils/storage/UserStorage\";\nimport MetamaskButton from \"../../components/MetamaskButton\";\nimport Web3SDK from \"../../../../blockchain/Web3SDK\";\n\ninterface SignUpViewProperties extends RouteComponentProps {\n}\n\ntype SignUpViewState = {\n    submitBusy: boolean,\n    email: string,\n    username: string,\n    password: string,\n    error: string | null\n}\n\nclass SignUpView extends Component<SignUpViewProperties, SignUpViewState> {\n\n    constructor(props: SignUpViewProperties) {\n        super(props)\n        this.state = {\n            submitBusy: false,\n            email: '',\n            username: '',\n            password: '',\n            error: null\n        }\n        this.signup = this.signup.bind(this)\n        this.goToLogin = this.goToLogin.bind(this)\n        this.goToMain = this.goToMain.bind(this)\n        this.handleSubmitLogin = this.handleSubmitLogin.bind(this)\n        this.handleSubmitLoginWithMetamask = this.handleSubmitLoginWithMetamask.bind(this)\n        this.handleEmailChange = this.handleEmailChange.bind(this)\n        this.handleUsernameChange = this.handleUsernameChange.bind(this)\n        this.handlePasswordChange = this.handlePasswordChange.bind(this)\n    }\n\n    private static inputsAreValid(email: string, username: string, password: string): boolean {\n        return email !== '' && username !== '' && password !== ''\n    }\n\n    private signup(email: string, username: string, password: string) {\n        if (!SignUpView.inputsAreValid(email, username, password)) {\n            // TODO detailed errors per fields\n            this.setState({error: \"Please correct invalid fields.\"})\n            return\n        }\n        this.setState({submitBusy: true, error: null})\n        ApiSDK.auth.signup({email: email, username: username, password: password}).then(_ => {\n            ApiSDK.auth.login({email: email, password: password}).then(response => {\n                this.setState({submitBusy: false})\n                SessionStorage.storeSession(response.token)\n                this.props.history.push('/home')\n            }, e => {\n                this.setState({submitBusy: false, error: e.error})\n            })\n        }, e => {\n            this.setState({submitBusy: false, error: e.error})\n        })\n    }\n\n    private signupWithMetamask(email: string, username: string, password: string, publicAddress: string) {\n        if (!SignUpView.inputsAreValid(email, username, password)) {\n            // TODO detailed errors per fields\n            this.setState({error: \"Please correct invalid fields.\"})\n            return\n        }\n        this.setState({submitBusy: true, error: null})\n        ApiSDK.auth.signupWithEth({email: email, username: username, password: password, publicAddress: publicAddress}).then(_ => {\n            ApiSDK.auth.login({email: email, password: password}).then(response => {\n                this.setState({submitBusy: false})\n                SessionStorage.storeSession(response.token)\n                this.props.history.push('/home')\n            }, e => {\n                this.setState({submitBusy: false, error: e.error})\n            })\n        }, e => {\n            this.setState({submitBusy: false, error: e.error})\n        })\n    }\n\n    handleSubmitLogin(e: any) {\n        e.preventDefault();\n        this.signup(this.state.email, this.state.username, this.state.password)\n    }\n\n    handleSubmitLoginWithMetamask = async () => {\n        const publicAddress = Web3SDK.getDefaultAccount()\n        if (publicAddress == null) {\n            this.setState({error: \"Select an account on your Metamask.\"})\n            return\n        }\n        this.signupWithMetamask(this.state.email, this.state.username, this.state.password, publicAddress)\n    }\n\n    handleEmailChange(e: any) {\n        this.setState({email: e.target.value})\n    }\n\n    handleUsernameChange(e: any) {\n        this.setState({username: e.target.value})\n    }\n\n    handlePasswordChange(e: any) {\n        this.setState({password: e.target.value})\n    }\n\n    goToLogin(e: any) {\n        e.preventDefault();\n        this.props.history.push('/login')\n    }\n\n    goToMain = (e: any) => {\n        e.preventDefault();\n        this.props.history.push('/')\n    }\n\n    render() {\n        return <div className=\"content signup\">\n            <div className=\"wrapper\">\n                <div className=\"exit-btn\">\n                    <CloseButton onClick={this.goToMain}/>\n                </div>\n                <form onSubmit={this.handleSubmitLogin}>\n                    <h3>Register</h3>\n                    {this.state.error != null && <Alert variant={'danger'}>{this.state.error}</Alert>}\n                    <div className=\"form-group\">\n                        <label>Email address</label>\n                        <input type=\"email\" value={this.state.email} onChange={this.handleEmailChange}\n                               className=\"form-control\" placeholder=\"Enter email\"/>\n                    </div>\n                    <div className=\"form-group\">\n                        <label>Username</label>\n                        <input type=\"text\" value={this.state.username} onChange={this.handleUsernameChange}\n                               className=\"form-control\" placeholder=\"Enter username\"/>\n                    </div>\n                    <div className=\"form-group\">\n                        <label>Password</label>\n                        <input type=\"password\" value={this.state.password} onChange={this.handlePasswordChange}\n                               className=\"form-control\" placeholder=\"Enter password\"/>\n                    </div>\n                    <Button type=\"submit\" className=\"btn btn-primary btn-block\" disabled={this.state.submitBusy}>\n                        {this.state.submitBusy && <i className=\"fa fa-refresh fa-spin\" style={{marginRight: \"5px\"}}/>}\n                        {this.state.submitBusy && <span>Logging-in..</span>}\n                        {!this.state.submitBusy && <span>Submit</span>}\n                    </Button>\n                    <p className=\"is-registered text-right\">\n                        Already registered <a href=\"/#\" onClick={this.goToLogin}>sign in?</a>\n                    </p>\n                </form>\n                <div className=\"form-metamask\">\n                    <div><p className=\"separator\"/></div>\n                    <MetamaskButton text={\"Register with Metamask\"} callback={this.handleSubmitLoginWithMetamask}/>\n                </div>\n            </div>\n        </div>\n    }\n}\n\nexport default withRouter(SignUpView);","import Web3 from 'web3'\nimport detectEthereumProvider from '@metamask/detect-provider';\nimport {Address} from \"./types\";\n\ndeclare let window: any;\n\nexport default class Web3SDK {\n\n    static async loadMetamask(): Promise<boolean> {\n        if (window.ethereum) {\n            const accounts = await window.ethereum.request({method: 'eth_requestAccounts'})\n            window.web3 = new Web3(window.ethereum)\n            window.ethereum.defaultAccount = accounts[0]\n            window.ethereum.on('accountsChanged', (accounts: string[]) => {\n                window.ethereum.defaultAccount = accounts[0]\n            })\n            return true\n        }\n            // else if (window.web3) {\n            //     window.web3 = new Web3(window.web3.currentProvider)\n            //     return true\n        // }\n        else {\n            window.alert('Non-Ethereum browser detected. You should consider trying MetaMask!')\n            return false\n        }\n    }\n\n    static async isMetamaskInstalled(): Promise<boolean> {\n        const provider = await detectEthereumProvider();\n        return !!provider;\n    }\n\n    static async isMetamaskConnected(): Promise<boolean> {\n        const provider = await detectEthereumProvider()\n\n        if (provider) {\n            console.log('Metamask successfully detected!');\n            const result = await window.ethereum.request({method: 'eth_accounts'})\n            return result.length > 0\n        } else {\n            console.log('Metamask is not installed!');\n            return false\n        }\n    }\n\n    static async sign(publicAddress: string, text: string): Promise<string> {\n        const message = `Signing with Metamask: ${text}`\n        return window.web3.eth.personal.sign(window.web3.utils.fromUtf8(message), publicAddress, '')\n    }\n\n    // @ts-ignore\n    static getEth(): EthereumProvider | null {\n        return window.ethereum\n    }\n\n    static async getNetwork(): Promise<bigint> {\n        return window.web3.eth.net.getId()\n    }\n\n    static async getAccounts(): Promise<Address[]> {\n        return window.ethereum.request({method: 'eth_accounts'})\n    }\n\n    static getDefaultAccount(): Address | null {\n        try {\n            return window.ethereum.defaultAccount.toLowerCase()\n        } catch (e) {\n            return null\n        }\n    }\n\n    static address(value: Address): Address {\n        return value.toLowerCase()\n    }\n\n    static isDefaultAccount(address: Address): boolean {\n        return this.getDefaultAccount() === address.toLowerCase()\n    }\n\n    static encode(value: string): string {\n        return window.web3.utils.fromAscii(value)\n    }\n\n    static nullAddress() {\n        return '0x0000000000000000000000000000000000000000';\n    }\n\n    static nullBytes() {\n        return '0x0000000000000000000000000000000000000000000000000000000000000000';\n    }\n}"],"sourceRoot":""}